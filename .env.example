# ============================================
# COPY TRADING BOT CONFIGURATION
# ============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to git!

# --------------------------------------------
# TRADER TO COPY
# --------------------------------------------
# The Polymarket wallet address of the trader you want to copy
# Find good traders at: https://polymarket.com/leaderboard
TRADER_ADDRESS=0x0000000000000000000000000000000000000000

# Friendly name/tag for the trader (for easier identification in logs)
TRADER_TAG=MyTrader

# --------------------------------------------
# TRADING MODE
# --------------------------------------------
# Choose how the bot executes trades:
#   paper - Simulated trading (no real money, for testing)
#   live  - Real trading (uses actual funds)
# Always start with 'paper' to test your strategy!
TRADING_MODE=paper

# Starting balance for paper trading (ignored in live mode)
PAPER_TRADING_BALANCE=1000

# --------------------------------------------
# YOUR WALLET (Live Trading)
# --------------------------------------------
# Your private key for signing orders (KEEP THIS SECRET!)
# Hex-encoded, with or without 0x prefix
# Never share this with anyone
MY_PRIVATE_KEY=

# Your Polymarket proxy wallet address (the "funder")
# Find this at: https://polymarket.com/settings
# This is where your USDC collateral lives — NOT your signer address
FUNDER_ADDRESS=

# Signature type for your wallet:
#   0 = EOA (standard wallet like MetaMask)
#   1 = POLY_PROXY (Magic Link / email-based login)
#   2 = POLY_GNOSIS_SAFE (default — most Polymarket.com users)
SIGNATURE_TYPE=2

# --------------------------------------------
# CLOB API CREDENTIALS (Optional)
# --------------------------------------------
# If not provided, credentials will be auto-derived from your private key
# on first run using createOrDeriveApiKey()
# CLOB_API_KEY=
# CLOB_SECRET=
# CLOB_PASSPHRASE=

# CLOB API endpoint (default: https://clob.polymarket.com)
# CLOB_API_URL=https://clob.polymarket.com

# Chain ID (default: 137 for Polygon mainnet, 80002 for Amoy testnet)
# CHAIN_ID=137

# --------------------------------------------
# LIVE TRADING ORDER SETTINGS
# --------------------------------------------
# Max seconds to wait for an order to fill before cancelling (default: 30)
ORDER_FILL_TIMEOUT_SECONDS=30

# How often to poll order status while waiting for fill (ms, default: 1000)
ORDER_STATUS_POLL_INTERVAL_MS=1000

# --------------------------------------------
# POLLING SETTINGS
# --------------------------------------------
# Polling method: how to detect trader's trades
#   activity  - Poll /activity endpoint for actual trades (recommended)
#               Provides exact timestamps, execution prices, and latency tracking
#   positions - Poll /positions endpoint and diff changes (legacy)
#               State-based detection, no exact trade timestamps
POLLING_METHOD=activity

# Use trader's execution price instead of fetching current market price
# Only works with POLLING_METHOD=activity (which provides exact trade prices)
#   true  - Use trader's price directly (faster, saves ~67-100ms per trade) (recommended)
#   false - Fetch current market price for potentially better execution
USE_TRADER_PRICE=true

# How often to check for new trades (milliseconds)
# 200 = 5 times per second (recommended for speed)
# 1000 = 1 time per second (for testing/demo)
POLLING_INTERVAL_MS=200

# Alert after this many consecutive errors
MAX_CONSECUTIVE_ERRORS=5

# --------------------------------------------
# COPY TRADING SETTINGS (Phase 2)
# --------------------------------------------
# How to size your copy trades
# Options: proportional_to_portfolio, proportional_to_trader, fixed
SIZING_METHOD=proportional_to_portfolio

# What % of your portfolio to use per trade (0.05 = 5%)
PORTFOLIO_PERCENTAGE=0.05

# Price offset in basis points (50 = 0.5% buffer)
PRICE_OFFSET_BPS=50

# Minimum order size (Polymarket requires minimum 5 shares)
MIN_ORDER_SIZE=5

# Maximum shares per single token
MAX_POSITION_PER_TOKEN=1000

# Action when calculated trade is below minimum:
#   buy_at_min - Execute at minimum order size (5 shares)
#   skip       - Skip the trade entirely
BELOW_MIN_LIMIT_ACTION=buy_at_min

# --------------------------------------------
# ORDER EXECUTION SETTINGS
# --------------------------------------------
# Order type: 'limit' (recommended) or 'market'
ORDER_TYPE=limit

# How long to wait for order to fill before canceling (seconds)
# Set to 0 for no expiration (Good-Til-Cancelled)
ORDER_EXPIRATION_SECONDS=30

# SELL strategy when copying trader exits:
#   proportional - Sell same % of your position as trader sold
#   full_exit    - Sell all when trader sells any
#   match_delta  - Sell same number of shares (capped at your position)
SELL_STRATEGY=proportional

# --------------------------------------------
# RISK SETTINGS (Phase 2)
# --------------------------------------------
# Stop copying if daily loss exceeds this (USD)
MAX_DAILY_LOSS=100

# Emergency stop if total loss exceeds this (USD)
MAX_TOTAL_LOSS=500

# --------------------------------------------
# SPENDING LIMITS
# --------------------------------------------
# Maximum amount to spend per token (USD, 0 = unlimited)
# This is per outcome token, not per market
MAX_TOKEN_SPEND=500

# Maximum amount to spend per market (USD, 0 = unlimited)
# A market includes all outcome tokens (Yes/No, etc.)
MAX_MARKET_SPEND=1000

# Stop buying when total holdings value exceeds this (USD, 0 = unlimited)
# Once your portfolio value reaches this limit, no more buys until some are sold
TOTAL_HOLDINGS_LIMIT=5000

# --------------------------------------------
# MARKET ANALYSIS (Order Book Intelligence)
# --------------------------------------------
# These settings control how the bot reads the order book before
# every trade and adapts its behavior based on market conditions.

# Spread above this (bps) engages adaptive offset mode
# When spread is wide, the price offset scales up automatically
WIDE_SPREAD_THRESHOLD_BPS=200

# Spread above this (bps) REJECTS the trade entirely
# Prevents trading in extremely illiquid conditions
MAX_SPREAD_BPS=800

# Maximum price divergence (bps) from trader's execution price
# If the market has moved too far since the trader filled, skip the trade
MAX_DIVERGENCE_BPS=500

# Minimum shares available near best price to proceed
# If the book is thinner than this, reject the trade
MIN_DEPTH_SHARES=10

# How far from best price to measure depth (0.01 = 1%)
DEPTH_RANGE_PERCENT=0.01

# Price data older than this (ms) is considered stale
STALE_PRICE_THRESHOLD_MS=10000

# --------------------------------------------
# ADAPTIVE PRICE OFFSET
# --------------------------------------------
# When spread exceeds this threshold, offset scales with spread
ADAPTIVE_SPREAD_THRESHOLD_BPS=150

# Multiply the current spread by this to get the adaptive offset
# E.g., spread=400bps × 0.5 = 200bps offset
ADAPTIVE_SPREAD_MULTIPLIER=0.5

# Never exceed this offset even in volatile markets
MAX_ADAPTIVE_OFFSET_BPS=300

# --------------------------------------------
# AUTO TAKE PROFIT / STOP LOSS
# --------------------------------------------
# Enable automatic TP/SL exits (true/false)
AUTO_TP_SL_ENABLED=false

# Take profit percentage from entry price (0.10 = 10% profit)
# When price increases by this %, automatically sell
TAKE_PROFIT_PERCENT=0.10

# Stop loss percentage from entry price (0.05 = 5% loss)
# When price decreases by this %, automatically sell
STOP_LOSS_PERCENT=0.05

# --------------------------------------------
# 1-CLICK SELL (KILL SWITCH)
# --------------------------------------------
# Enable keyboard shortcut for instant sell-all (true/false)
# Press 'q' to sell all positions immediately
ONE_CLICK_SELL_ENABLED=true

# --------------------------------------------
# DATABASE (Phase 2-3)
# --------------------------------------------
# PostgreSQL connection string
DATABASE_URL=postgresql://user:password@localhost:5432/copybot

# Redis connection string
REDIS_URL=redis://localhost:6379
